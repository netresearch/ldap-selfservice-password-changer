/* This file is an entrypoint for the TailwindCSS compiler */

@import "tailwindcss";

@theme {
  /* Enhanced contrast colors for WCAG 2.2 AAA (7:1 ratio) - WCAG 1.4.6 */
  --color-gray-900: oklch(15% 0.034 264.665);
  --color-gray-100: oklch(99.5% 0.003 264.542);
}

@variant dark (&:where(.dark, .dark *));

/* Reusable component classes */
@layer components {
  .page-html {
    @apply h-full bg-gray-50 text-gray-900;
    @apply dark:bg-gray-950 dark:text-gray-50;
  }

  .page-body {
    @apply flex min-h-full items-center justify-center p-4;
  }

  .page-card {
    @apply comfortable:space-y-4 comfortable:p-8 compact:space-y-3 compact:p-6;
    @apply relative max-w-lg rounded-lg border border-gray-400;
    @apply bg-white shadow-sm;
    @apply dark:border-gray-600 dark:bg-gray-900;
  }
}

/* Custom variants for password reveal functionality */
@custom-variant reveal-button (&[data-revealed="true"] [data-purpose="reveal"]);
@custom-variant reveal-eye (&[data-revealed="true"] .on-content-revealed);
@custom-variant reveal-eye-slash (&[data-revealed="true"] .on-content-hidden);
@custom-variant nonreveal-eye (&[data-revealed="false"] .on-content-revealed);
@custom-variant nonreveal-eye-slash (&[data-revealed="false"] .on-content-hidden);

/* Custom variant for input focus within container */
@custom-variant input-focus (&:has(input:focus));

/* Custom variant for error input focus within container */
@custom-variant error-input-focus (&:has(input[aria-invalid="true"]:focus));

/* Custom variants for UI density toggle */
/* Matches both the container AND its descendants */
@custom-variant comfortable (&:is([data-density="comfortable"], [data-density="comfortable"] *));
@custom-variant compact (&:is([data-density="compact"], [data-density="compact"] *));

/* Custom variant for hover and focus states */
@custom-variant hocus {
  &:hover,
  &:focus {
    @slot;
  }
}

/* Respect user's motion preferences (WCAG 2.3.3 Animation from Interactions - Level AAA) */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Support high contrast mode (WCAG 1.4.6 Enhanced Contrast - Level AAA) */
@media (prefers-contrast: more) {
  :root {
    /* Increase contrast beyond current AAA levels */
    --color-gray-900: oklch(10% 0.04 264.665);
    --color-gray-100: oklch(100% 0 0);
  }

  /* Thicker borders for better distinction in high contrast */
  .border {
    border-width: 2px;
  }
  .border-2 {
    border-width: 3px;
  }
}

/* Support low contrast mode (for light sensitivity) */
@media (prefers-contrast: less) {
  :root {
    /* Reduce contrast for users with light sensitivity */
    --color-gray-900: oklch(25% 0.02 264.665);
    --color-gray-100: oklch(95% 0.002 264.542);
  }
}
